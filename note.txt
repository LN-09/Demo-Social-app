
Cáº¥u trÃºc dá»± Ã¡n Next:
/social-app
â”œâ”€â”€ /public                 # Chá»©a áº£nh, favicon, fonts, etc.
â”œâ”€â”€ /src
â”‚   â”œâ”€â”€ /app                # Next.js App Router (náº¿u dÃ¹ng app router)
â”‚   â”‚   â”œâ”€â”€ /(auth)         # NhÃ³m route cho authentication
â”‚   â”‚   â”œâ”€â”€ /dashboard      # Trang dashboard chÃ­nh
â”‚   â”‚   â”œâ”€â”€ layout.tsx      # Layout chÃ­nh cá»§a á»©ng dá»¥ng
â”‚   â”‚   â”œâ”€â”€ page.tsx        # Trang chÃ­nh (root)
â”‚   â”‚   â”œâ”€â”€ loading.tsx     # MÃ n hÃ¬nh loading chung
â”‚   â”‚   â”œâ”€â”€ error.tsx       # Trang lá»—i chung
â”‚   â”œâ”€â”€ /components         # Chá»©a component UI tÃ¡i sá»­ dá»¥ng
â”‚   â”‚   â”œâ”€â”€ Button.tsx      # Component Button chung
â”‚   â”‚   â”œâ”€â”€ Header.tsx      # Header chung
â”‚   â”‚   â”œâ”€â”€ Footer.tsx      # Footer chung
â”‚   â”œâ”€â”€ /features           # Chia nhá» á»©ng dá»¥ng theo tÃ­nh nÄƒng
â”‚   â”‚   â”œâ”€â”€ /auth           # CÃ¡c logic vá» authentication
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ authSlice.ts (Redux slice)
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts      # Gá»i API auth
â”‚   â”œâ”€â”€ /hooks              # Hook custom tÃ¡i sá»­ dá»¥ng
â”‚   â”‚   â”œâ”€â”€ useAuth.ts      # Custom hook cho auth
â”‚   â”‚   â”œâ”€â”€ useTheme.ts     # Hook cho dark mode
â”‚   â”œâ”€â”€ /lib                # ThÆ° viá»‡n utils, functions
â”‚   â”‚   â”œâ”€â”€ axiosClient.ts  # Config Axios
â”‚   â”‚   â”œâ”€â”€ fetcher.ts      # Fetch API vá»›i SWR/React Query
â”‚   â”œâ”€â”€ /providers          # Chá»©a cÃ¡c context provider
â”‚   â”‚   â”œâ”€â”€ ThemeProvider.tsx
â”‚   â”‚   â”œâ”€â”€ AuthProvider.tsx
â”‚   â”œâ”€â”€ /redux              # Cáº¥u trÃºc Redux Toolkit
â”‚   â”‚   â”œâ”€â”€ store.ts
â”‚   â”‚   â”œâ”€â”€ slices/
â”‚   â”œâ”€â”€ /styles             # Chá»©a file Tailwind/global styles
â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚   â”œâ”€â”€ tailwind.css
â”‚   â”œâ”€â”€ /types              # Chá»©a cÃ¡c type vÃ  interface
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”œâ”€â”€ /utils              # Chá»©a cÃ¡c hÃ m tiá»‡n Ã­ch chung
â”‚   â”‚   â”œâ”€â”€ helpers.ts
â”‚   â”‚   â”œâ”€â”€ constants.ts
â”‚   â”œâ”€â”€ /validators         # Schema validation (Yup/Zod)
â”‚   â”‚   â”œâ”€â”€ authSchema.ts
|---|   middleware.ts
â”œâ”€â”€ .env                    # Environment variables
â”œâ”€â”€ .eslintrc.js            # ESLint config
â”œâ”€â”€ .prettierrc             # Prettier config
â”œâ”€â”€ next.config.js          # Next.js config
â”œâ”€â”€ tsconfig.json           # TypeScript config
â”œâ”€â”€ package.json            # Package dependencies


Middleware dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬ ?
âœ… XÃ¡c thá»±c (Authentication) trÆ°á»›c khi vÃ o trang
âœ… Redirect URL dá»±a trÃªn Ä‘iá»u kiá»‡n
âœ… Cháº·n hoáº·c xá»­ lÃ½ request trÆ°á»›c khi nÃ³ Ä‘áº¿n API hoáº·c page.


Shadcn:

.husky: dÃ¹ng Ä‘á»ƒ khi commit sáº½ duyá»‡t commit


Highlights:
ğŸš€ Tech stack: Next.js App Router, Postgres, Prisma, Clerk & TypeScript
ğŸ’» Server Components, Layouts, Route Handlers, Server Actions
ğŸ”¥ Special Next.js files: loading.tsx, error.tsx, not-found.tsx
ğŸ“¡ API Integration using Route Handlers
ğŸ”„ Data Fetching, Caching & Revalidation
ğŸ­ Client & Server Components
ğŸ›£ï¸ Dynamic & Static Routes
ğŸ¨ Styling with Tailwind & Shadcn
ğŸ”’ Authentication & Authorization
-ğŸ“¤ File Uploads with UploadThing
ğŸ—ƒï¸ Database Integration with Prisma
ğŸš€ Server Actions & Forms
-âš¡ Optimistic Updates


1ï¸âƒ£ Káº¿t ná»‘i Postman vá»›i Neon Database Ä‘á»ƒ gá»­i truy váº¥n SQL
Neon lÃ  má»™t dá»‹ch vá»¥ PostgreSQL trÃªn cloud, báº¡n cÃ³ thá»ƒ káº¿t ná»‘i nÃ³ vá»›i Postman Ä‘á»ƒ gá»­i truy váº¥n SQL trá»±c tiáº¿p.

ğŸ”¹ BÆ°á»›c 1: Láº¥y thÃ´ng tin káº¿t ná»‘i tá»« Neon
Truy cáº­p Neon Database â†’ ÄÄƒng nháº­p.
Chá»n Database cá»§a báº¡n â†’ Connection Details.
Sao chÃ©p thÃ´ng tin Connection string (thÆ°á»ng cÃ³ dáº¡ng):
plaintext
Sao chÃ©p
Chá»‰nh sá»­a
postgres://username:password@host:port/database
ğŸ”¹ BÆ°á»›c 2: Cáº¥u hÃ¬nh Postman Ä‘á»ƒ káº¿t ná»‘i vá»›i Neon
Postman khÃ´ng há»— trá»£ PostgreSQL trá»±c tiáº¿p, nhÆ°ng báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng REST API proxy nhÆ° PostgREST hoáº·c má»™t backend trung gian.

ğŸ”¸ CÃ¡ch 1: DÃ¹ng Supabase (PostgREST)

ÄÄƒng kÃ½ Supabase vÃ  káº¿t ná»‘i Neon vá»›i Supabase.
Láº¥y RESTful API URL cá»§a Supabase (Ä‘Ã³ng vai trÃ² trung gian giá»¯a Postman vÃ  Neon).
DÃ¹ng Postman Ä‘á»ƒ gá»­i request GET/POST/PUT/DELETE Ä‘áº¿n API cá»§a Supabase.
ğŸ”¸ CÃ¡ch 2: DÃ¹ng má»™t API trung gian
Náº¿u báº¡n cÃ³ má»™t Node.js Express API hoáº·c NestJS, báº¡n cÃ³ thá»ƒ:

Táº¡o má»™t API nháº­n request tá»« Postman.
API sáº½ dÃ¹ng pg-promise hoáº·c node-postgres (pg) Ä‘á»ƒ káº¿t ná»‘i vá»›i Neon.
Tráº£ káº¿t quáº£ JSON vá» Postman.
2ï¸âƒ£ Táº¡o API sá»­ dá»¥ng Neon rá»“i kiá»ƒm thá»­ vá»›i Postman
Báº¡n cÃ³ thá»ƒ xÃ¢y dá»±ng má»™t API Ä‘Æ¡n giáº£n vá»›i Node.js Ä‘á»ƒ lÃ m trung gian giá»¯a Neon vÃ  Postman.

ğŸ”¹ BÆ°á»›c 1: CÃ i Ä‘áº·t thÆ° viá»‡n PostgreSQL cho Node.js
bash
Sao chÃ©p
Chá»‰nh sá»­a
npm install pg express cors dotenv
ğŸ”¹ BÆ°á»›c 2: Viáº¿t API káº¿t ná»‘i vá»›i Neon
Táº¡o file server.js:

javascript
Sao chÃ©p
Chá»‰nh sá»­a
require('dotenv').config();
const express = require('express');
const { Pool } = require('pg');
const cors = require('cors');

const app = express();
app.use(cors());
app.use(express.json());

// Káº¿t ná»‘i Ä‘áº¿n Neon
const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: { rejectUnauthorized: false }, // Quan trá»ng khi káº¿t ná»‘i Neon
});

// Endpoint Ä‘á»ƒ láº¥y danh sÃ¡ch users
app.get('/users', async (req, res) => {
  try {
    const result = await pool.query('SELECT * FROM users');
    res.json(result.rows);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

// Cháº¡y server
const PORT = process.env.PORT || 5000;
app.listen(PORT, () => console.log(`Server running on port ${PORT}`));
ğŸ”¹ BÆ°á»›c 3: Kiá»ƒm thá»­ API vá»›i Postman
Cháº¡y server:
bash
Sao chÃ©p
Chá»‰nh sá»­a
node server.js
Má»Ÿ Postman â†’ Chá»n GET â†’ Nháº­p URL API:
bash
Sao chÃ©p
Chá»‰nh sá»­a
http://localhost:5000/users
Nháº¥n Send â†’ Náº¿u thÃ nh cÃ´ng, báº¡n sáº½ nháº­n Ä‘Æ°á»£c danh sÃ¡ch users tá»« Neon.
3ï¸âƒ£ Cáº¥u hÃ¬nh mÃ´i trÆ°á»ng trong Postman Ä‘á»ƒ lÃ m viá»‡c vá»›i Neon
Náº¿u API cá»§a báº¡n cÃ³ nhiá»u mÃ´i trÆ°á»ng (local, dev, production), báº¡n cÃ³ thá»ƒ dÃ¹ng Environment Variables trong Postman.

ğŸ”¹ BÆ°á»›c 1: Táº¡o mÃ´i trÆ°á»ng
Má»Ÿ Postman â†’ Chá»n Environments â†’ Nháº¥n New.
ThÃªm biáº¿n:
nginx
Sao chÃ©p
Chá»‰nh sá»­a
DATABASE_URL = postgres://username:password@host:port/database
ğŸ”¹ BÆ°á»›c 2: Sá»­ dá»¥ng biáº¿n trong request
Trong Postman, thay vÃ¬ nháº­p URL trá»±c tiáº¿p, dÃ¹ng:
bash
Sao chÃ©p
Chá»‰nh sá»­a
{{DATABASE_URL}}/users
Äiá»u nÃ y giÃºp báº¡n dá»… dÃ ng chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c mÃ´i trÆ°á»ng (dev, test, prod).

4ï¸âƒ£ Káº¿t luáº­n
âœ… Báº¡n cÃ³ thá»ƒ dÃ¹ng Postman vá»›i Neon báº±ng cÃ¡ch:

Truy váº¥n Neon trá»±c tiáº¿p qua PostgREST hoáº·c API trung gian.
XÃ¢y dá»±ng API káº¿t ná»‘i Neon vá»›i Postman qua Node.js.
Sá»­ dá»¥ng Postman Environments Ä‘á»ƒ quáº£n lÃ½ biáº¿n mÃ´i trÆ°á»ng.

ğŸ”¹ File Actions lÃ  gÃ¬?
LÃ  cÃ¡c hÃ m cháº¡y trÃªn server nhÆ°ng cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i tá»« client mÃ  khÃ´ng cáº§n API routes riÃªng.
ÄÆ°á»£c Ä‘áº·t trong cÃ¡c file tÃ¡ch biá»‡t, giÃºp tá»• chá»©c mÃ£ tá»‘t hÆ¡n.
Hoáº¡t Ä‘á»™ng dá»±a trÃªn React Server Actions, nhÆ°ng Next.js cho phÃ©p tá»± Ä‘á»™ng táº¡o API endpoints khi cáº§n.
CÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i database, gá»­i email, xá»­ lÃ½ file, xÃ¡c thá»±c... mÃ  khÃ´ng lá»™ logic trÃªn client.
ğŸ”¹ So sÃ¡nh vá»›i API Routes

	File Actions	ğŸ†š API Routes
Khai bÃ¡o	HÃ m server trong file .ts	Route trong app/api/
Gá»i tá»« client	Import vÃ  gá»i trá»±c tiáº¿p	Fetch báº±ng fetch()
Báº£o máº­t	KhÃ´ng bá»‹ lá»™, chá»‰ cháº¡y trÃªn server	Cáº§n xÃ¡c thá»±c request
Hiá»‡u suáº¥t	Tá»‘i Æ°u hÆ¡n, Ã­t overhead	CÃ³ thÃªm HTTP overhead
ğŸ‘‰ DÃ¹ng File Actions khi xá»­ lÃ½ dá»¯ liá»‡u Ä‘Æ¡n giáº£n (CRUD, form submissions, auth...)
ğŸ‘‰ DÃ¹ng API Routes khi cáº§n endpoint RESTful, caching, middlewar
